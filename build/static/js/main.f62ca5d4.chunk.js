(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{234:function(t,e){},236:function(t,e){},246:function(t,e){},248:function(t,e){},275:function(t,e){},276:function(t,e){},281:function(t,e){},283:function(t,e){},290:function(t,e){},309:function(t,e){},326:function(t,e){},327:function(t,e){},346:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(11),i=n.n(a),o=n(26),s="http://hyggecoin.herokuapp.com";function u(t){return fetch(s+t,{mode:"cors",credentials:"omit"}).then((function(t){return t.json()})).then((function(t){return t.data})).catch((function(t){return console.error(t)}))}var l=n(2),d=Object(c.createContext)({chain:[],unconfirmedTransactions:null});function j(t){var e=t.children,n=Object(c.useState)([]),r=Object(o.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(null),j=Object(o.a)(s,2),h=j[0],b=j[1],f=Object(c.useCallback)((function(){u("/chain").then((function(t){return i(t)}))}),[]),O=Object(c.useCallback)((function(){u("/unconfirmed-transactions").then((function(t){return b(t)}))}),[]),p=Object(c.useCallback)((function(){f(),O()}),[f,O]);Object(c.useEffect)((function(){p(),setInterval(p,2e4)}),[p]);var x=Object(c.useMemo)((function(){return{chain:a,unconfirmedTransactions:h}}),[a,h]);return Object(l.jsx)(d.Provider,{value:x,children:e})}var h=n(97),b=n(20),f=n(4),O=n(387),p=n(390),x=n(415),m=n(392),g=n(393),v=n(395),y=n(108),S=n(394),w=n(347),k=n(398),B=n(399),I=n(203),C=n.n(I),N=n(205),M=n.n(N),E=n(206),D=n.n(E),P=n(207),T=n.n(P),H=n(204),W=n.n(H),A=n(348),z=n(396),F=n(397),R=n(12),J=Object(O.a)((function(t){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(b.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},t.mixins.toolbar),appBar:{zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})},drawerPaperClose:Object(h.a)({overflowX:"hidden",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),width:t.spacing(7)},t.breakpoints.up("sm"),{width:t.spacing(9)}),appBarSpacer:t.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:t.spacing(4),paddingBottom:t.spacing(4)},paper:{padding:t.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function L(t){var e=t.children,n=J(),c=r.a.useState(!0),a=Object(o.a)(c,2),i=a[0],s=a[1],u=Object(R.f)();return Object(l.jsxs)("div",{className:n.root,children:[Object(l.jsx)(p.a,{}),Object(l.jsx)(m.a,{position:"absolute",className:Object(f.a)(n.appBar,i&&n.appBarShift),children:Object(l.jsxs)(g.a,{className:n.toolbar,children:[Object(l.jsx)(w.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){s(!0)},className:Object(f.a)(n.menuButton,i&&n.menuButtonHidden),children:Object(l.jsx)(C.a,{})}),Object(l.jsx)(y.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:n.title,children:"Hyggecoin"})]})}),Object(l.jsxs)(x.a,{variant:"permanent",classes:{paper:Object(f.a)(n.drawerPaper,!i&&n.drawerPaperClose)},open:i,children:[Object(l.jsx)("div",{className:n.toolbarIcon,children:Object(l.jsx)(w.a,{onClick:function(){s(!1)},children:Object(l.jsx)(W.a,{})})}),Object(l.jsx)(S.a,{}),Object(l.jsx)(v.a,{children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(A.a,{button:!0,onClick:function(){return u.push("/chain-explorer")},children:[Object(l.jsx)(z.a,{children:Object(l.jsx)(M.a,{})}),Object(l.jsx)(F.a,{primary:"Chain Explorer"})]}),Object(l.jsxs)(A.a,{button:!0,onClick:function(){return u.push("/wallet")},children:[Object(l.jsx)(z.a,{children:Object(l.jsx)(D.a,{})}),Object(l.jsx)(F.a,{primary:"My Wallet"})]}),Object(l.jsxs)(A.a,{button:!0,onClick:function(){return u.push("/mine")},children:[Object(l.jsx)(z.a,{children:Object(l.jsx)(T.a,{})}),Object(l.jsx)(F.a,{primary:"Mine Coins"})]})]})})]}),Object(l.jsxs)("main",{className:n.content,children:[Object(l.jsx)("div",{className:n.appBarSpacer}),Object(l.jsx)(k.a,{maxWidth:"lg",className:n.container,children:Object(l.jsx)(B.a,{container:!0,spacing:3,children:e})})]})]})}var G=n(43),K=n(24),X=n(400),q=n(401),Q=n(417),U=n(402),V=n(403),Y=n(209),Z=n.n(Y),$=n(230);function _(t){var e=$.createHash("sha256");return e.update(t),e.digest("hex")}var tt=n(208);function et(t){return _(function(t){var e=t.previousHash,n=t.timestamp,c=t.data,r=t.nonce;return e+n+JSON.stringify(c)+r}(t))}function nt(t){return Object(b.a)(Object(b.a)({},t),{},{hash:et(t)})}function ct(t,e){return nt({timestamp:Date.now(),data:t,previousHash:e,hash:"",nonce:0})}function rt(t){var e;return(e=20,function t(n,c){return n.length<e?[].concat(Object(K.a)(c),[n]):t(n.slice(e),[].concat(Object(K.a)(c),[n.slice(0,e)]))}(t,[])).reduce((function(t,e){if(e.length<20)return t;var n=function(t){return(t[t.length-1]-t[0])/(t.length-1)}(e);return n>144e4?Math.min(t-1,15):n<96e4?Math.max(t+1,5):t}),6)}var at=new tt.ec("secp256k1");function it(t){return _(t.inputs.map((function(t){return t.transactionId+t.transactionOutputIndex})).join("")+t.outputs.map((function(t){return t.address+t.amount})).join("")+(t.message||""))}function ot(t,e){var n=at.keyFromPrivate(e,"hex");return Object(b.a)(Object(b.a)({},t),{},{inputs:t.inputs.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{signature:(c=n.sign(t.id).toDER(),Array.from(c,(function(t){return("0"+(255&t).toString(16)).slice(-2)})).join(""))});var c}))})}function st(t,e,n){return function(t,e,n,c){var r={id:"",inputs:t,message:n,outputs:e};return ot(r=Object(b.a)(Object(b.a)({},r),{},{id:it(r)}),c)}([{signature:"",transactionId:"",transactionOutputIndex:t}],[{address:e,amount:1===t?500:10}],"Coinbase transaction",n)}function ut(t,e,n){return function(t,e){return[].concat(Object(K.a)(t),[ct(e,t[t.length-1].hash)]).reduce((function(t,e){var n=e.data.reduce((function(t,e){return t.concat(function(t){return t.outputs.map((function(e,n){return{transactionId:t.id,index:n,address:e.address,amount:e.amount}}))}(e))}),[]),c=e.data.reduce((function(t,e){return t.concat(e.inputs)}),[]);return[].concat(Object(K.a)(t),Object(K.a)(n)).filter((function(t){return!c.find((function(e){return e.transactionId===t.transactionId&&e.transactionOutputIndex===t.index}))}))}),[])}(t,e).filter((function(t){return t.address===n}))}function lt(t,e){var n=t.inputs[0];if(!n.transactionId)return null;var c=e.find((function(t){return t.data.find((function(t){return t.id===n.transactionId}))})),r=null===c||void 0===c?void 0:c.data.find((function(t){return t.id===n.transactionId})),a=null===r||void 0===r?void 0:r.outputs[n.transactionOutputIndex];return(null===a||void 0===a?void 0:a.address)||null}var dt=Object(O.a)({hash:{fontSize:12}});function jt(t){return"".concat(t.substr(0,8),"...").concat(t.substr(-8))}function ht(t){var e=t.transaction,n=dt(),r=lt(e,Object(c.useContext)(d).chain),a=r?Object(l.jsx)(G.b,{to:"/wallet/".concat(r),children:jt(r)}):Object(l.jsx)("strong",{children:"COINBASE"});return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(X.a,{children:Object(l.jsxs)(q.a,{children:[Object(l.jsx)(y.a,{color:"textSecondary",className:n.hash,children:e.id}),Object(l.jsx)(y.a,{children:e.outputs.map((function(t,e){return Object(l.jsxs)("div",{children:[a," > ",Object(l.jsx)(G.b,{to:"/wallet/".concat(t.address),children:jt(t.address)})," for ",Object(l.jsx)("strong",{children:t.amount})," coins"]},e)}))}),e.message&&Object(l.jsxs)(y.a,{children:['Included message: "',e.message,'"']})]})}),Object(l.jsx)(S.a,{})]})}var bt=Object(O.a)({hash:{fontSize:12}});function ft(t){var e=t.block,n=t.index,c=bt();return Object(l.jsxs)(X.a,{children:[Object(l.jsxs)(q.a,{children:[Object(l.jsxs)(y.a,{component:"h2",variant:"h6",color:"textSecondary",gutterBottom:!0,children:["Block ",n]}),Object(l.jsx)(y.a,{color:"textSecondary",className:c.hash,children:e.hash}),Object(l.jsx)(y.a,{color:"textSecondary",className:c.hash,gutterBottom:!0,children:new Date(e.timestamp).toLocaleString()})]}),Object(l.jsxs)(Q.a,{children:[Object(l.jsx)(U.a,{expandIcon:Object(l.jsx)(Z.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(l.jsx)(y.a,{color:"textSecondary",children:"Transactions"})}),Object(l.jsx)(V.a,{children:Object(l.jsx)(B.a,{container:!0,spacing:1,children:e.data.map((function(t){return Object(l.jsx)(B.a,{item:!0,xs:12,children:Object(l.jsx)(ht,{transaction:t},t.id)})}))})})]})]})}function Ot(){var t=Object(c.useContext)(d).chain,e=Object(c.useMemo)((function(){return Object(K.a)(t).reverse()}),[t]);return Object(l.jsx)(B.a,{container:!0,spacing:2,children:e.map((function(t,n){return Object(l.jsx)(B.a,{item:!0,lg:6,children:Object(l.jsx)(ft,{block:t,index:e.length-n},t.hash)})}))})}var pt=n(211),xt=n(404),mt=n(405),gt=n(406),vt=n(407),yt=n(408),St=Object(O.a)((function(t){return{paper:{padding:t.spacing(2),display:"flex",flexDirection:"column",wordBreak:"break-all"}}}));function wt(){var t=Object(R.g)().address,e=Object(c.useContext)(d).chain,n=St(),r=e.length>0?function(t,e,n){return ut(t,e,n).reduce((function(t,e){return t+e.amount}),0)}(e,[],t):null,a=Object(c.useMemo)((function(){return function(t,e,n){var c=t.reduce((function(t,e){return t.concat(e.data)}),[]).concat(e);return console.log(c),c.filter((function(e){return e.outputs.find((function(t){return t.address===n}))||lt(e,t)===n}))}(e,[],t).reverse()}),[t,e]);return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(B.a,{container:!0,spacing:2,children:Object(l.jsx)(B.a,{item:!0,xs:12,children:Object(l.jsxs)(pt.a,{className:n.paper,children:[Object(l.jsxs)(y.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:["Wallet ",t]}),null!==r&&Object(l.jsxs)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,children:["Balance: ",r]}),Object(l.jsxs)(xt.a,{size:"small",children:[Object(l.jsx)(mt.a,{children:Object(l.jsxs)(gt.a,{children:[Object(l.jsx)(vt.a,{children:"Incoming / Outgoing"}),Object(l.jsx)(vt.a,{children:"Address"}),Object(l.jsx)(vt.a,{align:"right",children:"Amount"}),Object(l.jsx)(vt.a,{children:"Message"})]})}),Object(l.jsx)(yt.a,{children:a.map((function(n){var c=1===n.inputs.length&&1===n.outputs.length&&Number.isInteger(n.inputs[0].transactionOutputIndex)&&""===n.inputs[0].transactionId;if(!c&&!n.outputs.map((function(t){return t.address})).find((function(e){return e!==t})))return null;var r=lt(n,e),a=r===t,i=a?n.outputs.find((function(e){return e.address!==t})):n.outputs.find((function(e){return e.address===t})),o=a?null===i||void 0===i?void 0:i.address:r,s=o?Object(l.jsx)(G.b,{to:"/wallet/".concat(o),children:jt(o)}):c?"COINBASE":"-";return Object(l.jsxs)(gt.a,{children:[Object(l.jsx)(vt.a,{children:a?"Outgoing":"Incoming"}),Object(l.jsx)(vt.a,{children:s}),Object(l.jsx)(vt.a,{align:"right",children:o?null===i||void 0===i?void 0:i.amount:n.outputs[0].amount}),Object(l.jsx)(vt.a,{children:n.message})]},n.id)}))})]})]})})})})}var kt=n(416),Bt=Object(O.a)((function(t){return{paper:{padding:t.spacing(2),display:"flex",flexDirection:"column",wordBreak:"break-all"}}}));function It(){var t=Bt(),e=Object(c.useState)(localStorage.getItem("publicKey")||""),n=Object(o.a)(e,2),r=n[0],a=n[1],i=Object(c.useState)(localStorage.getItem("secret")||""),s=Object(o.a)(i,2),u=s[0],d=s[1];return Object(c.useEffect)((function(){localStorage.setItem("publicKey",r),localStorage.setItem("secret",u)}),[r,u]),Object(l.jsx)(B.a,{container:!0,spacing:2,children:Object(l.jsx)(B.a,{item:!0,xs:12,children:Object(l.jsxs)(pt.a,{className:t.paper,children:[Object(l.jsx)(y.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:"My Wallet"}),Object(l.jsx)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,children:"Set your wallet details"}),Object(l.jsx)(kt.a,{label:"Public key",variant:"outlined",value:r,onChange:function(t){return a(t.target.value)},margin:"normal"}),Object(l.jsx)(kt.a,{label:"Secret key",variant:"outlined",value:u,onChange:function(t){return d(t.target.value)},margin:"normal"}),r&&Object(l.jsx)(G.b,{to:"/wallet/".concat(r),children:"Go to wallet"})]})})})}var Ct=n(411),Nt=n(413),Mt=n(412);function Et(){return new Worker(n.p+"static/js/miner.worker.5e018612.worker.js")}var Dt=Object(O.a)((function(t){return{paper:{padding:t.spacing(2),display:"flex",flexDirection:"column",wordBreak:"break-all"},text:{display:"flex",alignItems:"center"},select:{marginLeft:"1em"}}}));function Pt(){var t=Object(c.useContext)(d),e=t.chain,n=t.unconfirmedTransactions,r=Dt(),a=localStorage.getItem("publicKey"),i=localStorage.getItem("secret"),u=Object(c.useState)(0),j=Object(o.a)(u,2),h=j[0],b=j[1],f=Object(c.useState)(null),O=Object(o.a)(f,2),p=O[0],x=O[1],m=Object(c.useState)(0),g=Object(o.a)(m,2),v=g[0],S=g[1],w=Object(c.useState)(1),k=Object(o.a)(w,2),I=k[0],C=k[1],N=Object(c.useRef)(null),M=Object(c.useRef)([]),E=Object(c.useMemo)((function(){if(!n||0===e.length||!i||!a)return null;var t=st(e.length,a,i),c=ct([t].concat(Object(K.a)(n)),e[e.length-1].hash),r=function(t){return rt(t.map((function(t){return t.timestamp})))}(e);return{chain:e,unconfirmedTransactions:n,coinbaseTransaction:t,unminedBlock:c,difficulty:r}}),[e,n,a,i]),D=Object(c.useCallback)((function(t){var e=t.data;"count"===e.type?b((function(t){return t+e.count})):"solution"===e.type&&(console.log(e.block),x(e.block))}),[]);Object(c.useEffect)((function(){if((null===E||void 0===E?void 0:E.unminedBlock)&&(null===E||void 0===E?void 0:E.difficulty)&&!p){for(var t=[],e=0;e<I;e++){var n=new Et;n.postMessage({unminedBlock:E.unminedBlock,difficulty:E.difficulty}),n.onmessage=D,t.push(n)}N.current=t}return function(){N.current&&(console.log("terminating all workers"),N.current.forEach((function(t){return t.terminate()})))}}),[E,D,p,I]),Object(c.useEffect)((function(){var t,e;p&&(t="/mine-block",e=p,fetch(s+t,{method:"POST",body:JSON.stringify(e),mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return t.data}))).then((function(t){"success"===t&&S((function(t){return t+1})),b(0),x(null),M.current=[]})).catch((function(t){console.log(t),b(0),x(null),M.current=[]}))}),[p]);var P=Object(c.useCallback)((function(t){C(t.target.value)}),[]);if(Object(c.useEffect)((function(){M.current=[].concat(Object(K.a)(M.current),[{timestamp:Date.now(),count:h}]),M.current.length>200&&(M.current=M.current.slice(-200))}),[h]),!n)return Object(l.jsx)(l.Fragment,{children:"Loading..."});if(!i||!a)return Object(l.jsx)(l.Fragment,{children:"Please specify your public and secret keys in your Wallet"});var T=M.current.length>=2?(M.current[M.current.length-1].count-M.current[0].count)/((M.current[M.current.length-1].timestamp-M.current[0].timestamp)/1e3):null;return Object(l.jsx)(B.a,{container:!0,spacing:2,children:Object(l.jsx)(B.a,{item:!0,xs:12,children:Object(l.jsxs)(pt.a,{className:r.paper,children:[Object(l.jsx)(y.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:"Mine block"}),Object(l.jsxs)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,children:["Block will include ",n.length," transactions"]}),(null===E||void 0===E?void 0:E.difficulty)&&Object(l.jsxs)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,children:["Difficulty: ",E.difficulty]}),Object(l.jsxs)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,className:r.text,children:["Number of cores used ",Object(l.jsx)(Ct.a,{variant:"outlined",children:Object(l.jsx)(Nt.a,{labelId:"demo-simple-select-error-label",id:"demo-simple-select-error",value:I,onChange:P,className:r.select,children:new Array(navigator.hardwareConcurrency).fill(!0).map((function(t,e){return e+1})).map((function(t){return Object(l.jsx)(Mt.a,{value:t,children:t},t)}))})})]}),h>0&&Object(l.jsxs)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,children:["Mining in progress, tries: ",h,", hash rate: ",T&&Math.floor(T/1e3)," khashes/s"]}),v>0&&Object(l.jsxs)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,children:["Solutions: ",v]})]})})})}function Tt(){return Object(l.jsx)(j,{children:Object(l.jsx)(G.a,{children:Object(l.jsx)(L,{children:Object(l.jsxs)(R.c,{children:[Object(l.jsx)(R.a,{path:"/chain-explorer",children:Object(l.jsx)(Ot,{})}),Object(l.jsx)(R.a,{path:"/wallet",exact:!0,children:Object(l.jsx)(It,{})}),Object(l.jsx)(R.a,{path:"/wallet/:address",children:Object(l.jsx)(wt,{})}),Object(l.jsx)(R.a,{path:"/mine",children:Object(l.jsx)(Pt,{})})]})})})})}i.a.render(Object(l.jsx)(Tt,{}),document.getElementById("root"))}},[[346,1,2]]]);
//# sourceMappingURL=main.f62ca5d4.chunk.js.map