(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{228:function(t,n){},230:function(t,n){},240:function(t,n){},242:function(t,n){},269:function(t,n){},270:function(t,n){},275:function(t,n){},277:function(t,n){},284:function(t,n){},303:function(t,n){},320:function(t,n){},321:function(t,n){},340:function(t,n,e){"use strict";e.r(n);var a=e(0),c=e.n(a),r=e(11),i=e.n(r),o=e(25),s="http://hyggecoin.herokuapp.com";function u(t){return fetch(s+t,{mode:"cors",credentials:"omit"}).then((function(t){return t.json()})).then((function(t){return t.data})).catch((function(t){return console.error(t)}))}var l=e(2),d=Object(a.createContext)({chain:[],unconfirmedTransactions:null});function j(t){var n=t.children,e=Object(a.useState)([]),c=Object(o.a)(e,2),r=c[0],i=c[1],s=Object(a.useState)(null),j=Object(o.a)(s,2),h=j[0],b=j[1],f=Object(a.useCallback)((function(){u("/chain").then((function(t){return i(t)}))}),[]),O=Object(a.useCallback)((function(){u("/unconfirmed-transactions").then((function(t){return b(t)}))}),[]),p=Object(a.useCallback)((function(){f(),O()}),[f,O]);Object(a.useEffect)((function(){p(),setInterval(p,2e4)}),[p]);var x=Object(a.useMemo)((function(){return{chain:r,unconfirmedTransactions:h}}),[r,h]);return Object(l.jsx)(d.Provider,{value:x,children:n})}var h=e(93),b=e(20),f=e(4),O=e(381),p=e(384),x=e(406),m=e(386),g=e(387),v=e(389),y=e(104),w=e(388),S=e(341),k=e(393),B=e(394),I=e(199),C=e.n(I),N=e(201),M=e.n(N),D=e(202),E=e.n(D),P=e(203),T=e.n(P),H=e(200),W=e.n(H),z=e(390),A=e(391),F=e(392),J=e(12),R=Object(O.a)((function(t){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(b.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},t.mixins.toolbar),appBar:{zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})},drawerPaperClose:Object(h.a)({overflowX:"hidden",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),width:t.spacing(7)},t.breakpoints.up("sm"),{width:t.spacing(9)}),appBarSpacer:t.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:t.spacing(4),paddingBottom:t.spacing(4)},paper:{padding:t.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function G(t){var n=t.children,e=R(),a=c.a.useState(!0),r=Object(o.a)(a,2),i=r[0],s=r[1],u=Object(J.f)();return Object(l.jsxs)("div",{className:e.root,children:[Object(l.jsx)(p.a,{}),Object(l.jsx)(m.a,{position:"absolute",className:Object(f.a)(e.appBar,i&&e.appBarShift),children:Object(l.jsxs)(g.a,{className:e.toolbar,children:[Object(l.jsx)(S.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){s(!0)},className:Object(f.a)(e.menuButton,i&&e.menuButtonHidden),children:Object(l.jsx)(C.a,{})}),Object(l.jsx)(y.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title,children:"Hyggecoin"})]})}),Object(l.jsxs)(x.a,{variant:"permanent",classes:{paper:Object(f.a)(e.drawerPaper,!i&&e.drawerPaperClose)},open:i,children:[Object(l.jsx)("div",{className:e.toolbarIcon,children:Object(l.jsx)(S.a,{onClick:function(){s(!1)},children:Object(l.jsx)(W.a,{})})}),Object(l.jsx)(w.a,{}),Object(l.jsx)(v.a,{children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(z.a,{button:!0,onClick:function(){return u.push("/chain-explorer")},children:[Object(l.jsx)(A.a,{children:Object(l.jsx)(M.a,{})}),Object(l.jsx)(F.a,{primary:"Chain Explorer"})]}),Object(l.jsxs)(z.a,{button:!0,onClick:function(){return u.push("/wallet")},children:[Object(l.jsx)(A.a,{children:Object(l.jsx)(E.a,{})}),Object(l.jsx)(F.a,{primary:"Wallet"})]}),Object(l.jsxs)(z.a,{button:!0,onClick:function(){return u.push("/mine")},children:[Object(l.jsx)(A.a,{children:Object(l.jsx)(T.a,{})}),Object(l.jsx)(F.a,{primary:"Mine Coins"})]})]})})]}),Object(l.jsxs)("main",{className:e.content,children:[Object(l.jsx)("div",{className:e.appBarSpacer}),Object(l.jsx)(k.a,{maxWidth:"lg",className:e.container,children:Object(l.jsx)(B.a,{container:!0,spacing:3,children:n})})]})]})}var K=e(41),L=e(26),U=e(395),X=e(396),q=e(407),Q=e(397),V=e(398),Y=e(205),Z=e.n(Y),$=e(224);function _(t){var n=$.createHash("sha256");return n.update(t),n.digest("hex")}var tt=e(204);function nt(t){return _(function(t){var n=t.previousHash,e=t.timestamp,a=t.data,c=t.nonce;return n+e+JSON.stringify(a)+c}(t))}function et(t){return Object(b.a)(Object(b.a)({},t),{},{hash:nt(t)})}function at(t,n){return et({timestamp:Date.now(),data:t,previousHash:n,hash:"",nonce:0})}function ct(t){var n;return(n=10,function t(e,a){return e.length<n?[].concat(Object(L.a)(a),[e]):t(e.slice(n),[].concat(Object(L.a)(a),[e.slice(0,n)]))}(t,[])).reduce((function(t,n){if(n.length<10)return t;var e=function(t){return(t[t.length-1]-t[0])/(t.length-1)}(n);return e>144e4?Math.min(t-1,15):e<96e4?Math.max(t+1,5):t}),7)}var rt=new tt.ec("secp256k1");function it(t){return _(t.inputs.map((function(t){return t.transactionId+t.transactionOutputIndex})).join("")+t.outputs.map((function(t){return t.address+t.amount})).join("")+(t.message||""))}function ot(t,n){var e=rt.keyFromPrivate(n,"hex");return Object(b.a)(Object(b.a)({},t),{},{inputs:t.inputs.map((function(n){return Object(b.a)(Object(b.a)({},n),{},{signature:(a=e.sign(t.id).toDER(),Array.from(a,(function(t){return("0"+(255&t).toString(16)).slice(-2)})).join(""))});var a}))})}function st(t,n,e){return function(t,n,e,a){var c={id:"",inputs:t,message:e,outputs:n};return ot(c=Object(b.a)(Object(b.a)({},c),{},{id:it(c)}),a)}([{signature:"",transactionId:"",transactionOutputIndex:t}],[{address:n,amount:1===t?500:10}],"Coinbase transaction",e)}function ut(t,n,e){return function(t,n){return[].concat(Object(L.a)(t),[at(n,t[t.length-1].hash)]).reduce((function(t,n){var e=n.data.reduce((function(t,n){return t.concat(function(t){return t.outputs.map((function(n,e){return{transactionId:t.id,index:e,address:n.address,amount:n.amount}}))}(n))}),[]),a=n.data.reduce((function(t,n){return t.concat(n.inputs)}),[]);return[].concat(Object(L.a)(t),Object(L.a)(e)).filter((function(t){return!a.find((function(n){return n.transactionId===t.transactionId&&n.transactionOutputIndex===t.index}))}))}),[])}(t,n).filter((function(t){return t.address===e}))}function lt(t,n){var e=t.inputs[0];if(!e.transactionId)return null;var a=n.find((function(t){return t.data.find((function(t){return t.id===e.transactionId}))})),c=null===a||void 0===a?void 0:a.data.find((function(t){return t.id===e.transactionId})),r=null===c||void 0===c?void 0:c.outputs[e.transactionOutputIndex];return(null===r||void 0===r?void 0:r.address)||null}var dt=Object(O.a)({hash:{fontSize:12}});function jt(t){return"".concat(t.substr(0,8),"...").concat(t.substr(-8))}function ht(t){var n=t.transaction,e=dt(),c=lt(n,Object(a.useContext)(d).chain),r=c?Object(l.jsx)(K.b,{to:"/wallet/".concat(c),children:jt(c)}):Object(l.jsx)("strong",{children:"COINBASE"});return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(U.a,{children:Object(l.jsxs)(X.a,{children:[Object(l.jsx)(y.a,{color:"textSecondary",className:e.hash,children:n.id}),Object(l.jsx)(y.a,{children:n.outputs.map((function(t,n){return Object(l.jsxs)("div",{children:[r," > ",Object(l.jsx)(K.b,{to:"/wallet/".concat(t.address),children:jt(t.address)})," for ",Object(l.jsx)("strong",{children:t.amount})," coins"]},n)}))}),n.message&&Object(l.jsxs)(y.a,{children:['Included message: "',n.message,'"']})]})}),Object(l.jsx)(w.a,{})]})}var bt=Object(O.a)({hash:{fontSize:12}});function ft(t){var n=t.block,e=t.index,a=bt();return Object(l.jsxs)(U.a,{children:[Object(l.jsxs)(X.a,{children:[Object(l.jsxs)(y.a,{component:"h2",variant:"h6",color:"textSecondary",gutterBottom:!0,children:["Block ",e]}),Object(l.jsx)(y.a,{color:"textSecondary",className:a.hash,children:n.hash}),Object(l.jsx)(y.a,{color:"textSecondary",className:a.hash,gutterBottom:!0,children:new Date(n.timestamp).toLocaleString()})]}),Object(l.jsxs)(q.a,{children:[Object(l.jsx)(Q.a,{expandIcon:Object(l.jsx)(Z.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(l.jsx)(y.a,{color:"textSecondary",children:"Transactions"})}),Object(l.jsx)(V.a,{children:Object(l.jsx)(B.a,{container:!0,spacing:1,children:n.data.map((function(t){return Object(l.jsx)(B.a,{item:!0,xs:12,children:Object(l.jsx)(ht,{transaction:t},t.id)})}))})})]})]})}function Ot(){var t=Object(a.useContext)(d).chain,n=Object(a.useMemo)((function(){return Object(L.a)(t).reverse()}),[t]);return Object(l.jsx)(B.a,{container:!0,spacing:2,children:n.map((function(t,e){return Object(l.jsx)(B.a,{item:!0,lg:6,children:Object(l.jsx)(ft,{block:t,index:n.length-e},t.hash)})}))})}var pt=e(207),xt=e(399),mt=e(400),gt=e(401),vt=e(402),yt=e(403),wt=Object(O.a)((function(t){return{paper:{padding:t.spacing(2),display:"flex",flexDirection:"column",wordBreak:"break-all"}}}));function St(){var t=Object(J.g)().address,n=Object(a.useContext)(d).chain,e=wt(),c=n.length>0?function(t,n,e){return ut(t,n,e).reduce((function(t,n){return t+n.amount}),0)}(n,[],t):null,r=Object(a.useMemo)((function(){return function(t,n,e){var a=t.reduce((function(t,n){return t.concat(n.data)}),[]).concat(n);return console.log(a),a.filter((function(n){return n.outputs.find((function(t){return t.address===e}))||lt(n,t)===e}))}(n,[],t).reverse()}),[t,n]);return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(B.a,{container:!0,spacing:2,children:Object(l.jsx)(B.a,{item:!0,xs:12,children:Object(l.jsxs)(pt.a,{className:e.paper,children:[Object(l.jsxs)(y.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:["Wallet ",t]}),null!==c&&Object(l.jsxs)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,children:["Balance: ",c]}),Object(l.jsxs)(xt.a,{size:"small",children:[Object(l.jsx)(mt.a,{children:Object(l.jsxs)(gt.a,{children:[Object(l.jsx)(vt.a,{children:"Incoming / Outgoing"}),Object(l.jsx)(vt.a,{children:"Address"}),Object(l.jsx)(vt.a,{align:"right",children:"Amount"}),Object(l.jsx)(vt.a,{children:"Message"})]})}),Object(l.jsx)(yt.a,{children:r.map((function(e){var a=1===e.inputs.length&&1===e.outputs.length&&Number.isInteger(e.inputs[0].transactionOutputIndex)&&""===e.inputs[0].transactionId;if(!a&&!e.outputs.map((function(t){return t.address})).find((function(n){return n!==t})))return null;var c=lt(e,n),r=c===t,i=r?e.outputs.find((function(n){return n.address!==t})):e.outputs.find((function(n){return n.address===t})),o=r?null===i||void 0===i?void 0:i.address:c,s=o?Object(l.jsx)(K.b,{to:"/wallet/".concat(o),children:jt(o)}):a?"COINBASE":"-";return Object(l.jsxs)(gt.a,{children:[Object(l.jsx)(vt.a,{children:r?"Outgoing":"Incoming"}),Object(l.jsx)(vt.a,{children:s}),Object(l.jsx)(vt.a,{align:"right",children:o?null===i||void 0===i?void 0:i.amount:e.outputs[0].amount}),Object(l.jsx)(vt.a,{children:e.message})]},e.id)}))})]})]})})})})}var kt=e(404),Bt=Object(O.a)((function(t){return{paper:{padding:t.spacing(2),display:"flex",flexDirection:"column",wordBreak:"break-all"}}}));function It(){var t=Bt(),n=Object(a.useState)(localStorage.getItem("publicKey")||""),e=Object(o.a)(n,2),c=e[0],r=e[1],i=Object(a.useState)(localStorage.getItem("secret")||""),s=Object(o.a)(i,2),u=s[0],d=s[1];return Object(a.useEffect)((function(){localStorage.setItem("publicKey",c),localStorage.setItem("secret",u)}),[c,u]),Object(l.jsx)(B.a,{container:!0,spacing:2,children:Object(l.jsx)(B.a,{item:!0,xs:12,children:Object(l.jsxs)(pt.a,{className:t.paper,children:[Object(l.jsx)(y.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:"My Wallet"}),Object(l.jsx)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,children:"Set your wallet details"}),Object(l.jsx)(kt.a,{label:"Public key",variant:"outlined",value:c,onChange:function(t){return r(t.target.value)},margin:"normal"}),Object(l.jsx)(kt.a,{label:"Secret key",variant:"outlined",value:u,onChange:function(t){return d(t.target.value)},margin:"normal"}),c&&Object(l.jsx)(K.b,{to:"/wallet/".concat(c),children:"Go to wallet"})]})})})}function Ct(){return new Worker(e.p+"static/js/miner.worker.b6a7ccd9.worker.js")}var Nt=Object(O.a)((function(t){return{paper:{padding:t.spacing(2),display:"flex",flexDirection:"column",wordBreak:"break-all"}}}));function Mt(){var t=Object(a.useContext)(d),n=t.chain,e=t.unconfirmedTransactions,c=Nt(),r=localStorage.getItem("publicKey"),i=localStorage.getItem("secret"),u=Object(a.useState)(0),j=Object(o.a)(u,2),h=j[0],b=j[1],f=Object(a.useState)(null),O=Object(o.a)(f,2),p=O[0],x=O[1],m=Object(a.useState)(null),g=Object(o.a)(m,2),v=g[0],w=g[1],S=Object(a.useState)(0),k=Object(o.a)(S,2),I=k[0],C=k[1],N=Object(a.useRef)(null),M=Object(a.useMemo)((function(){if(!e||0===n.length)return null;var t=st(n.length,r||"",i||""),a=at([t].concat(Object(L.a)(e)),n[n.length-1].hash),c=function(t){return ct(t.map((function(t){return t.timestamp})))}(n);return{chain:n,unconfirmedTransactions:e,coinbaseTransaction:t,unminedBlock:a,difficulty:c}}),[n,e,r,i]),D=Object(a.useCallback)((function(t){var n=t.data;"count"===n.type?b((function(t){return t+n.count})):"solution"===n.type&&(console.log(n.block),w(n.block))}),[]);if(Object(a.useEffect)((function(){if((null===M||void 0===M?void 0:M.unminedBlock)&&(null===M||void 0===M?void 0:M.difficulty)&&!v){for(var t=[],n=0;n<navigator.hardwareConcurrency;n++){var e=new Ct;e.postMessage({unminedBlock:M.unminedBlock,difficulty:M.difficulty}),e.onmessage=D,t.push(e)}N.current=t,x((function(t){return null===t?Date.now():t}))}return function(){N.current&&(console.log("terminating all workers"),N.current.forEach((function(t){return t.terminate()})))}}),[M,D,v]),Object(a.useEffect)((function(){var t,n;v&&(t="/mine-block",n=v,fetch(s+t,{method:"POST",body:JSON.stringify(n),mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return t.data}))).then((function(t){"success"===t&&C((function(t){return t+1})),b(0),w(null),x(null)})).catch((function(t){console.log(t),b(0),w(null),x(null)}))}),[v]),!e)return Object(l.jsx)(l.Fragment,{children:"Loading..."});if(!i||!r)return Object(l.jsx)(l.Fragment,{children:"Please specify your public and secret keys in your Wallet"});var E=null!==p?(Date.now()-p)/1e3:null;return Object(l.jsx)(B.a,{container:!0,spacing:2,children:Object(l.jsx)(B.a,{item:!0,xs:12,children:Object(l.jsxs)(pt.a,{className:c.paper,children:[Object(l.jsx)(y.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:"Mine block"}),Object(l.jsxs)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,children:["Block will include ",e.length," transactions"]}),(null===M||void 0===M?void 0:M.difficulty)&&Object(l.jsxs)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,children:["Difficulty: ",M.difficulty]}),Object(l.jsxs)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,children:["Using cores: ",navigator.hardwareConcurrency]}),h>0&&Object(l.jsxs)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,children:["Mining in progress, tries: ",h,", hash rate: ",E&&Math.floor(h/E)," hash/s"]}),I>0&&Object(l.jsxs)(y.a,{component:"h3",variant:"h6",color:"textSecondary",gutterBottom:!0,children:["Solutions: ",I]})]})})})}function Dt(){return Object(l.jsx)(j,{children:Object(l.jsx)(K.a,{children:Object(l.jsx)(G,{children:Object(l.jsxs)(J.c,{children:[Object(l.jsx)(J.a,{path:"/chain-explorer",children:Object(l.jsx)(Ot,{})}),Object(l.jsx)(J.a,{path:"/wallet",exact:!0,children:Object(l.jsx)(It,{})}),Object(l.jsx)(J.a,{path:"/wallet/:address",children:Object(l.jsx)(St,{})}),Object(l.jsx)(J.a,{path:"/mine",children:Object(l.jsx)(Mt,{})})]})})})})}i.a.render(Object(l.jsx)(Dt,{}),document.getElementById("root"))}},[[340,1,2]]]);
//# sourceMappingURL=main.e3a8afd7.chunk.js.map